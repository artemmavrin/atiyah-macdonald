\begin{exercise}
Let \(\phi : A \to B\) be a ring homomorphism.
Let \(X = \Spec(A)\) and \(Y = \Spec(B)\).
If \(\mathfrak{q} \in Y\), then \(\phi^{-1}(\mathfrak{q})\) is a prime ideal of \(A\), i.e., a point of \(X\).
Hence \(\phi\) induces a mapping \(\phi^* : Y \to X\).
Show that
\begin{parts}
\part
If \(f \in A\) then \({\phi^*}^{-1}(X_f) = Y_{\phi(f)}\), and hence that \(\phi^*\) is continuous.
\part
If \(\mathfrak{a}\) is an ideal of \(A\), then \({\phi^*}^{-1}(V(\mathfrak{a})) = V(\mathfrak{a}^e)\).
\part
If \(\mathfrak{b}\) is an ideal of \(B\), then \(\bar{\phi^*(V(\mathfrak{b}))} = V(\mathfrak{b}^c)\).
\part
If \(\phi\) is surjective, then \(\phi^*\) is a homeomorphism of \(Y\) onto the closed subset \(V(\Ker(\phi))\) of \(X\).
(In particular, \(\Spec(A)\) and \(\Spec(A / \mathfrak{N})\) (where \(\mathfrak{N}\) is the nilradical of \(A\)) are naturally homeomorphic.)
\part
If \(\phi\) is injective, then \(\phi^*(Y)\) is dense in \(X\).
More precisely, \(\phi^*(Y)\) is dense in \(X\) \(\iff\) \(\Ker(\phi) \subseteq \mathfrak{N}\).
\part
Let \(\psi : B \to C\) be another ring homomorphism.
Then \((\psi \circ \phi)^* = \phi^* \circ \psi^*\).
\part
Let \(A\) be an integral domain with just one non-zero prime ideal \(\mathfrak{p}\), and let \(K\) be the field of fractions of \(A\).
Let \(B = (A / \mathfrak{p}) \times K\).
Define \(\phi : A \to B\) by \(\phi(x) = (\bar{x}, x)\), where \(\bar{x}\) is the image of \(x\) in \(A / \mathfrak{p}\).
Show that \(\phi^*\) is bijective but not a homeomorphism.
\end{parts}
\end{exercise}

\begin{partsolution}{i}
If \(f \in A\), then \(\mathfrak{q} \in {\phi^*}^{-1}(X_f)\) if and only if \(\phi^*(\mathfrak{q}) = \phi^{-1}(\mathfrak{q}) \in X_f\), which is the case if and only if \(f \notin \phi^{-1}(\mathfrak{q})\), which occurs if and only if \(\mathfrak{q} \in Y_{\phi(f)}\).
Thus, \({\phi^*}^{-1}(X_f) = Y_{\phi(f)}\).
Consequently, since preimages under \(\phi^*\) of basic open sets in \(X\) are open in \(Y\), it follows that \(\phi^*\) is continuous.
\end{partsolution}

\begin{partsolution}{ii}
Let \(\mathfrak{a}\) be an ideal of \(A\).
Suppose \(\mathfrak{q} \in {\phi^*}^{-1}(V(\mathfrak{a}))\), so that \(\phi^{-1}(\mathfrak{q}) \in V(\mathfrak{a})\), or, in other words, \(\mathfrak{a} \subseteq \phi^{-1}(\mathfrak{q})\).
It follows that
\begin{equation*}
\varphi(\mathfrak{a}) \subseteq \phi(\phi^{-1}(\mathfrak{q})) \subseteq \mathfrak{q}.
\end{equation*}
Consequently, \(\mathfrak{a}^e \subseteq \mathfrak{q}\), so \(\mathfrak{q} \in V(\mathfrak{a}^e)\).
Thus, \({\phi^*}^{-1}(V(\mathfrak{a})) \subseteq V(\mathfrak{a}^e)\).

Conversely, suppose \(\mathfrak{q} \in V(\mathfrak{a}^e)\).
Then \(\mathfrak{a}^e \subseteq \mathfrak{q}\), so by Proposition~1.17, \(\mathfrak{a} \subseteq \varphi^{-1}(\mathfrak{a}^e) \subseteq \varphi^{-1}(\mathfrak{q})\).
Thus, \(\varphi^{-1}(\mathfrak{q}) \in V(\mathfrak{a})\), so \(\mathfrak{q} \in {\phi^*}^{-1}(V(\mathfrak{a}))\).
It follows that \(V(\mathfrak{a}^e) \subseteq {\phi^*}^{-1}(V(\mathfrak{a}))\), so we conclude that \({\phi^*}^{-1}(V(\mathfrak{a})) = V(\mathfrak{a}^e)\).
\end{partsolution}

\begin{partsolution}{iii}
Let \(\mathfrak{b}\) be an ideal of \(B\).
Suppose \(\mathfrak{p} \in \phi^*(V(\mathfrak{b}))\), so that there exists some \(\mathfrak{q} \in V(\mathfrak{b})\) such that \(\phi^{-1}(\mathfrak{q}) = \mathfrak{p}\).
Then \(\mathfrak{b} \subseteq \mathfrak{q}\), so \(\mathfrak{b}^c \subseteq \mathfrak{p}\), whence \(\mathfrak{p} \in V(\mathfrak{b}^c)\).
Therefore, \(\phi^*(V(\mathfrak{b})) \subseteq V(\mathfrak{b}^c)\), so, since \(V(\mathfrak{b}^c)\) is closed, \(\bar{\phi^*(V(\mathfrak{b}))} \subseteq V(\mathfrak{b}^c)\).

Conversely, suppose \(\mathfrak{p} \in V(\mathfrak{b}^c)\), and let \(X_f\), for some \(f \in A\), be a basic open neighborhood of \(\mathfrak{p}\).
We claim that \(\phi^*(V(\mathfrak{b})) \cap X_f\) is nonempty, whence it will follow that \(\mathfrak{p} \in \bar{\phi^*(V(\mathfrak{b}))}\).

Since \(r(\mathfrak{b}^c) = r(\mathfrak{b})^c\) by Exercise~1.18 in the text, \expartref{1}{15}{i} implies that \(V(\mathfrak{b}^c) = V(r(\mathfrak{b})^c)\).
In particular, \(\mathfrak{p} \in V(r(\mathfrak{b})^c)\), so \(r(\mathfrak{b})^c \subseteq \mathfrak{p}\).
Since \(\mathfrak{p} \in X_f\) (i.e., \(f \notin \mathfrak{p}\)) and \(r(\mathfrak{b})^c \subseteq \mathfrak{p}\), it follows that \(f \notin r(\mathfrak{b})^c\), so \(\phi(f) \notin r(\mathfrak{b})\).
Consequently, by Proposition~1.14 there exists a \(\mathfrak{q} \in V(\mathfrak{b})\) such that \(\phi(f) \notin \mathfrak{q}\).
Thus, \(f \notin \phi^*(\mathfrak{q})\), so \(\phi^*(\mathfrak{q}) \in \phi^*(V(\mathfrak{b})) \cap X_f\).
Therefore, \(\phi^*(V(\mathfrak{b})) \cap X_f\) is nonempty, so \(\mathfrak{p} \in \bar{\phi^*(V(\mathfrak{b}))}\), and hence \(V(\mathfrak{b}^c) \subseteq \bar{\phi^*(V(\mathfrak{b}))}\).
We conclude that \(\bar{\phi^*(V(\mathfrak{b}))} = V(\mathfrak{b}^c)\).
\end{partsolution}

\begin{partsolution}{iv}
First, if \(\mathfrak{q} \in Y\), then \(\phi^*(\mathfrak{q}) \in V(\Ker(\phi))\) since \(\phi(x) = 0 \in \phi^*(\mathfrak{q})\) for all \(x \in \Ker(\phi)\).
Thus, \(\phi^*(Y) \subseteq V(\Ker(\phi))\).

Now suppose \(\phi\) is surjective.
Also, suppose \(\mathfrak{a}\) is an ideal of \(A\).
Then \(\phi(\mathfrak{a})\) is a subgroup of \(B\) (regardless of surjectivity).
Moreover, if \(y \in \phi(\mathfrak{a})\) and \(b \in B\), then choose \(x \in \mathfrak{a}\) and (since \(\phi\) is surjective) \(a \in A\) such that \(\phi(x) = y\) and \(\phi(a) = b\).
Then \(a x \in \mathfrak{a}\), so \(b y = \phi(a x) \in \phi(\mathfrak{a})\), and hence \(\phi(\mathfrak{a})\) is an ideal of \(B\).

Suppose \(\mathfrak{p} \in V(\Ker(\phi))\).
Then \(\phi(\mathfrak{p})\) is an ideal of \(B\) by the previous paragraph.
Moreover, \(1 \notin \phi(\mathfrak{p})\) (otherwise, choose \(x \in \mathfrak{p}\) such that \(\phi(x) = 1 = \phi(1)\), in which case \(x - 1 \in \Ker(\phi) \subseteq \mathfrak{p}\), which is impossible), so \(\phi(\mathfrak{p})\) is a proper ideal of \(B\).
Finally, suppose \(x y \in \phi(\mathfrak{p})\) for some \(x, y \in B\).
Choose \(z \in \mathfrak{p}\) such that \(\phi(z) = x y\) and, by surjectivity, \(x^\prime, y^\prime \in A\) such that \(x = \phi(x^\prime)\) and \(y = \phi(y^\prime)\).
Then \(z - x^\prime y^\prime \in \Ker(\phi) \subseteq \mathfrak{p}\), so \(x^\prime y^\prime \in \mathfrak{p}\), whence \(x^\prime \in \mathfrak{p}\) or \(y^\prime \in \mathfrak{p}\), and hence \(x = \phi(x^\prime) \in \phi(\mathfrak{p})\) or \(y = \phi(y^\prime) \in \phi(\mathfrak{p})\).
Thus, \(\phi(\mathfrak{p})\) is a prime ideal of \(B\) whenever \(\mathfrak{p} \in V(\Ker(\phi))\).

Next, it's necessarily the case that \(\mathfrak{p} \subseteq \phi^*(\phi(\mathfrak{p}))\).
Conversely, suppose \(x \in \phi^*(\phi(\mathfrak{p}))\), so that \(\phi(x) \in \phi(\mathfrak{p})\).
Choose \(y \in \mathfrak{p}\) such that \(\phi(y) = \phi(x)\), so that \(x - y \in \Ker(\phi) \subseteq \mathfrak{p}\), and hence \(x \in \mathfrak{p}\).
Thus, \(\phi^*(\phi(\mathfrak{p})) = \mathfrak{p}\).

Summarizing the results so far, \(\phi^*\) is a continuous (by \partref{1}{21}{i}) surjection of \(Y\) onto \(V(\Ker(\phi))\).
Next, suppose \(\mathfrak{q}, \mathfrak{q}^\prime \in Y\) such that \(\phi^*(\mathfrak{q}) = \phi^*(\mathfrak{q}^\prime)\).
Suppose \(y \in \mathfrak{q}\), so that, since \(\phi\) is surjecitve, there exists \(x \in \phi^*(\mathfrak{q}) = \phi^*(\mathfrak{q}^\prime)\) such that \(\phi(x) = y\), and hence \(y \in \mathfrak{q}^\prime\).
Thus, \(\mathfrak{q} \subseteq \mathfrak{q}^\prime\), so \(\mathfrak{q} = \mathfrak{q}^\prime\) by symmetry, and hence \(\phi^*\) is injective.

Lastly, to conclude that \(\phi^*\) is a homeomorphism of \(Y\) onto \(V(\Ker(\phi))\), it suffices to show that \(\phi^*\) is a closed map.
By \partref{1}{21}{iii}, it suffices to show that \(V(\mathfrak{b}^c) \subseteq \phi^*(V(\mathfrak{b}))\) whenever \(\mathfrak{b}\) is an ideal of \(B\).
Thus, suppose \(\mathfrak{p} \in V(\mathfrak{b}^c)\), so that \(\phi^{-1}(\mathfrak{b}) \subseteq \mathfrak{p}\), and \(\mathfrak{p} \in V(\Ker(\phi))\) since \(\Ker(\phi) \subseteq \mathfrak{b}^c\).
Since \(\phi\) is surjective, \(\mathfrak{b} = \phi(\phi^{-1}(\mathfrak{b})) \subseteq \phi(\mathfrak{p})\), so \(\phi(\mathfrak{p}) \in V(\mathfrak{b})\), and hence \(\mathfrak{p} = \phi^*(\phi(\mathfrak{p})) \in \phi^*(V(\mathfrak{b}))\).
Therefore, \(V(\mathfrak{b}^c) \subseteq \phi^*(V(\mathfrak{b}))\), and so \(\phi^*\) is a homeomorphism of \(Y\) onto \(V(\Ker(\phi))\).
\end{partsolution}

\begin{partsolution}{v}

\end{partsolution}

\begin{partsolution}{vi}
If \(\mathfrak{q} \in \Spec(C)\), then \((\psi \circ \phi)^{-1}(\mathfrak{q}) = \psi^{-1}(\phi^{-1}(\mathfrak{q}))\).
\end{partsolution}

\begin{partsolution}{vii}

\end{partsolution}